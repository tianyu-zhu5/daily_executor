# è‡ªåŠ¨åŒ–æ¨é€è„šæœ¬ - ä½¿ç”¨è¯´æ˜

æ¯ä¸ªäº¤æ˜“æ—¥è‡ªåŠ¨æ‰§è¡Œï¼šKçº¿æ•°æ®æ›´æ–° â†’ **CCIåº•èƒŒç¦»æ£€æµ‹** â†’ ä¿¡å·ç”Ÿæˆ â†’ å¾®ä¿¡æ¨é€

**æ–°å¢åŠŸèƒ½** â­: é›†æˆCCIåº•èƒŒç¦»è‡ªåŠ¨æ£€æµ‹ï¼Œæ— éœ€æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ï¼

---

## ç›®å½•ç»“æ„

```
daily_executor/
â”œâ”€â”€ config.json              # é…ç½®æ–‡ä»¶ï¼ˆå¿…é¡»é…ç½®ï¼‰
â”œâ”€â”€ daily_executor.py        # ä¸»æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ wechat_pusher.py         # å¾®ä¿¡æ¨é€æ¨¡å—
â”œâ”€â”€ setup_task.bat           # Windowså®šæ—¶ä»»åŠ¡è®¾ç½®è„šæœ¬
â”œâ”€â”€ data/                    # æœ¬åœ°æ•°æ®ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰â­
â”‚   â””â”€â”€ cci_signals.db       # CCIåº•èƒŒç¦»æ•°æ®åº“ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”œâ”€â”€ signals/                 # ä¿¡å·è¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install requests pandas
```

### 2. é…ç½® Serveré…±

1. è®¿é—® [Serveré…±å®˜ç½‘](https://sct.ftqq.com/) æ³¨å†Œè´¦å·
2. è·å– SendKeyï¼ˆæ¯ä¸ªæ¥æ”¶äººéœ€è¦ä¸€ä¸ªSendKeyï¼‰
3. ç¼–è¾‘ `config.json`ï¼Œå¡«å…¥å®é™…çš„SendKey

```json
{
  "server_sauce": {
    "recipients": [
      {
        "name": "å¼ ä¸‰",
        "sendkey": "SCT123xxxè¯·æ›¿æ¢ä¸ºå®é™…çš„SendKey",
        "enabled": true
      }
    ]
  }
}
```

### 3. æµ‹è¯•è¿è¡Œ

```bash
cd daily_executor
python daily_executor.py
```

æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—ï¼š
- æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `logs/executor_YYYYMMDD_HHMMSS.log`
- æ£€æŸ¥æ¯ä¸ªæ­¥éª¤æ˜¯å¦æˆåŠŸ

### 4. è®¾ç½®å®šæ—¶ä»»åŠ¡

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰**

1. å³é”® `setup_task.bat`ï¼Œé€‰æ‹©"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"
2. æŒ‰æç¤ºç¡®è®¤åˆ›å»ºä»»åŠ¡
3. ä»»åŠ¡å°†åœ¨æ¯ä¸ªå·¥ä½œæ—¥16:00è‡ªåŠ¨æ‰§è¡Œ

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨åˆ›å»º**

1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº" (Win+R â†’ `taskschd.msc`)
2. åˆ›å»ºåŸºæœ¬ä»»åŠ¡
3. è§¦å‘å™¨ï¼šæ¯å‘¨ï¼Œå‘¨ä¸€è‡³å‘¨äº”ï¼Œ16:00
4. æ“ä½œï¼šå¯åŠ¨ç¨‹åº `python` + å‚æ•° `daily_executor.py`
5. èµ·å§‹äºï¼š`C:\Users\Administrator\Documents\quant\daily_executor`

---

## é…ç½®æ–‡ä»¶è¯´æ˜

### config.json å„å­—æ®µè¯´æ˜

#### 1. server_sauce - Serveré…±é…ç½®

```json
{
  "server_sauce": {
    "recipients": [
      {
        "name": "æ¥æ”¶äººå§“å",
        "sendkey": "Serveré…±SendKey",
        "enabled": true  // æ˜¯å¦å¯ç”¨æ­¤æ¥æ”¶äºº
      }
    ]
  }
}
```

- `name`: æ¥æ”¶äººå§“åï¼ˆç”¨äºæ—¥å¿—è¯†åˆ«ï¼‰
- `sendkey`: Serveré…±æä¾›çš„SendKey
- `enabled`: è®¾ç½®ä¸º `false` å¯ä¸´æ—¶ç¦ç”¨æŸä¸ªæ¥æ”¶äºº

#### 2. signal_generation - ä¿¡å·ç”Ÿæˆé…ç½®

```json
{
  "signal_generation": {
    "db_path": "../CCI-Divergence/data/cci_signals.db",  // CCIæ•°æ®åº“è·¯å¾„
    "data_dir": "../data/daily",                         // Kçº¿æ•°æ®ç›®å½•
    "stock_pool_file": "../CCI-Divergence/stock_pools/hs300.txt",  // è‚¡ç¥¨æ± æ–‡ä»¶
    "output_file": "./signals/daily_signals.csv",        // ä¿¡å·è¾“å‡ºæ–‡ä»¶
    "min_confidence": 0.6,                               // æœ€å°ç½®ä¿¡åº¦ï¼ˆ0.0-1.0ï¼‰
    "use_next_day_open": true                            // æ˜¯å¦ä½¿ç”¨æ¬¡æ—¥å¼€ç›˜ä»·
  }
}
```

**åˆ‡æ¢è‚¡ç¥¨æ± ï¼š**
- æ²ªæ·±300: `../CCI-Divergence/stock_pools/hs300.txt`
- ä¸­è¯500: `../CCI-Divergence/stock_pools/zz500.txt` (å¦‚æœå­˜åœ¨)
- å…¨Aè‚¡: è®¾ç½®ä¸º `null` æˆ–åˆ é™¤ `stock_pool_file` å­—æ®µ

**è°ƒæ•´ç½®ä¿¡åº¦ï¼š**
- `0.0`: æ¨é€æ‰€æœ‰ä¿¡å·
- `0.5`: æ¨é€ä¸­ç­‰ç½®ä¿¡åº¦ä¿¡å·
- `0.7`: æ¨é€é«˜ç½®ä¿¡åº¦ä¿¡å·
- `0.9`: æ¨é€æé«˜ç½®ä¿¡åº¦ä¿¡å·

#### 3. cci_update - CCIåº•èƒŒç¦»æ›´æ–°é…ç½®

```json
{
  "cci_update": {
    "local_db_path": "./data/cci_signals.db",  // æœ¬åœ°CCIæ•°æ®åº“è·¯å¾„
    "data_dir": "../data/daily",               // Kçº¿æ•°æ®ç›®å½•
    "cci_period": 20,                          // CCIè®¡ç®—å‘¨æœŸ
    "pivot_window": 10,                        // è½¬æŠ˜ç‚¹è¯†åˆ«çª—å£
    "divergence_validity_days": 20,            // èƒŒç¦»æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰
    "timeout_seconds": 600                     // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  }
}
```

**è¯´æ˜**ï¼š
- æ­¥éª¤1.5ä¼šåœ¨æœ¬åœ° `./data/cci_signals.db` ä¸­å­˜å‚¨CCIåº•èƒŒç¦»æ•°æ®
- åªå¤„ç†é…ç½®çš„è‚¡ç¥¨æ± å’ŒæŒ‡å®šæ—¥æœŸçš„æ•°æ®
- æ•°æ®ä¸ `CCI-Divergence` é¡¹ç›®ç‹¬ç«‹ï¼Œäº’ä¸å½±å“

#### 4. data_update - æ•°æ®æ›´æ–°é…ç½®

```json
{
  "data_update": {
    "script_path": "../data/stock_data_manager.py",  // æ•°æ®æ›´æ–°è„šæœ¬è·¯å¾„
    "timeout_seconds": 1800                          // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  }
}
```

#### 5. filter_conditions - ä¿¡å·è¿‡æ»¤æ¡ä»¶

```json
{
  "filter_conditions": {
    "min_confidence": 0.6,         // æœ€å°ç½®ä¿¡åº¦ï¼ˆä¸signal_generationä¸€è‡´ï¼‰
    "max_signals_per_day": null,   // æ¯å¤©æœ€å¤šæ¨é€å¤šå°‘ä¸ªä¿¡å·ï¼ˆnull=ä¸é™åˆ¶ï¼‰
    "exclude_stocks": []            // æ’é™¤çš„è‚¡ç¥¨ä»£ç åˆ—è¡¨
  }
}
```

ç¤ºä¾‹ - æ’é™¤ç‰¹å®šè‚¡ç¥¨ï¼š
```json
{
  "exclude_stocks": ["000001_SZ", "600519_SH"]
}
```

#### 6. push_settings - æ¨é€è®¾ç½®

```json
{
  "push_settings": {
    "include_stock_name": true,                  // æ˜¯å¦åŒ…å«è‚¡ç¥¨åç§°
    "stock_name_cache": "../data/stock_list.txt",  // è‚¡ç¥¨åç§°ç¼“å­˜æ–‡ä»¶
    "message_format": "markdown",                // æ¶ˆæ¯æ ¼å¼ï¼ˆmarkdownï¼‰
    "push_on_no_signals": false                  // æ— ä¿¡å·æ—¶æ˜¯å¦æ¨é€
  }
}
```

#### 7. logging - æ—¥å¿—é…ç½®

```json
{
  "logging": {
    "log_dir": "./logs",   // æ—¥å¿—ç›®å½•
    "log_level": "INFO",   // æ—¥å¿—çº§åˆ«ï¼šDEBUG, INFO, WARNING, ERROR
    "keep_days": 30        // æ—¥å¿—ä¿ç•™å¤©æ•°
  }
}
```

#### 8. execution - æ‰§è¡Œé…ç½®

```json
{
  "execution": {
    "stop_on_error": true,  // é‡åˆ°é”™è¯¯æ˜¯å¦åœæ­¢ï¼ˆtrue=ç«‹å³åœæ­¢ï¼‰
    "retry_count": 0        // å¤±è´¥é‡è¯•æ¬¡æ•°ï¼ˆ0=ä¸é‡è¯•ï¼‰
  }
}
```

---

## æ‰§è¡Œæµç¨‹

### æ­¥éª¤1: æ›´æ–°Kçº¿æ•°æ®
- è„šæœ¬ï¼š`../data/stock_data_manager.py`
- åŠŸèƒ½ï¼šé€šè¿‡miniQMTæ›´æ–°å½“å¤©çš„Kçº¿æ•°æ®
- è€—æ—¶ï¼šå¢é‡æ›´æ–°çº¦5-10åˆ†é’Ÿ
- å‚æ•°ï¼š`--skip-step1` è·³è¿‡æ­¤æ­¥éª¤

### æ­¥éª¤1.5: æ›´æ–°CCIåº•èƒŒç¦»æ•°æ®ï¼ˆæ–°å¢ï¼‰â­
- åŠŸèƒ½ï¼šæ£€æµ‹æŒ‡å®šæ—¥æœŸçš„CCIåº•èƒŒç¦»å¹¶ä¿å­˜åˆ°æœ¬åœ°æ•°æ®åº“
- æ•°æ®åº“ï¼š`./data/cci_signals.db`ï¼ˆæœ¬åœ°ç‹¬ç«‹æ•°æ®åº“ï¼‰
- å¤„ç†èŒƒå›´ï¼š
  - è‚¡ç¥¨æ± ï¼šä» `config.json` è¯»å–
  - æ—¥æœŸï¼šæŒ‡å®šæ—¥æœŸæˆ–ä»Šå¤©
- è€—æ—¶ï¼šæ²ªæ·±300çº¦1-3åˆ†é’Ÿ
- å‚æ•°ï¼š`--skip-step1.5` è·³è¿‡æ­¤æ­¥éª¤ï¼ˆä½¿ç”¨ç°æœ‰æ•°æ®åº“ï¼‰

**é‡è¦è¯´æ˜**ï¼š
- è¿™æ˜¯æ–°å¢æ­¥éª¤ï¼Œç¡®ä¿æœ¬åœ°æœ‰æœ€æ–°çš„CCIåº•èƒŒç¦»æ•°æ®
- ä¸ `CCI-Divergence` é¡¹ç›®çš„æ•°æ®åº“ç‹¬ç«‹ï¼Œä¸ä¼šç›¸äº’å½±å“
- åªå¤„ç†æŒ‡å®šæ—¥æœŸçš„è‚¡ç¥¨ï¼Œé¿å…é‡å¤è®¡ç®—

### æ­¥éª¤2: ç”Ÿæˆä¹°å…¥ä¿¡å·
- è„šæœ¬ï¼šå†…éƒ¨è°ƒç”¨ `export_cci_signals_for_simulation.py`
- åŠŸèƒ½ï¼šä»**æœ¬åœ°CCIæ•°æ®åº“**å¯¼å‡ºå½“å¤©çš„åº•èƒŒç¦»ä¿¡å·
- æ•°æ®æºï¼š`./data/cci_signals.db`ï¼ˆç”±æ­¥éª¤1.5ç”Ÿæˆï¼‰
- å‚æ•°ï¼š
  - `--start-date` / `--end-date`: æŒ‡å®šæ—¥æœŸ
  - `--stocks`: è‚¡ç¥¨æ± ï¼ˆä»é…ç½®æ–‡ä»¶è¯»å–ï¼‰
  - `--min-confidence`: æœ€å°ç½®ä¿¡åº¦
  - `--db-path`: CCIæ•°æ®åº“è·¯å¾„
  - `--output`: è¾“å‡ºæ–‡ä»¶è·¯å¾„

### æ­¥éª¤3: æ¨é€åˆ°å¾®ä¿¡
- æ¨¡å—ï¼š`wechat_pusher.py`
- åŠŸèƒ½ï¼šè¯»å–ä¿¡å·CSVï¼Œæ ¼å¼åŒ–æ¶ˆæ¯ï¼Œæ¨é€ç»™æ‰€æœ‰é…ç½®çš„æ¥æ”¶äºº
- æ¶ˆæ¯æ ¼å¼ï¼š
  ```
  ğŸ“ˆ 2025-11-10 CCIåº•èƒŒç¦»ä¹°å…¥ä¿¡å· (3ä¸ª)

  ## äº¤æ˜“æ—¥æœŸ: 2025-11-10
  ## ä¿¡å·æ•°é‡: 3

  ### 1. 000001_SZ å¹³å®‰é“¶è¡Œ
  - ä¿¡å·ç±»å‹: CCIåº•èƒŒç¦»(CCI:-120.5â†’-85.3, 5å¤©)
  - ç½®ä¿¡åº¦: 75.00%
  - å»ºè®®ä»·æ ¼: Â¥12.35
  - èƒŒç¦»ID: 000001_SZ_2025-11-10

  ...
  ```

---

## æ—¥å¿—ç³»ç»Ÿ

### æ—¥å¿—æ–‡ä»¶å‘½å
- æ ¼å¼ï¼š`logs/executor_YYYYMMDD_HHMMSS.log`
- ç¤ºä¾‹ï¼š`logs/executor_20251110_160000.log`

### æ—¥å¿—å†…å®¹
- æ¯ä¸ªæ­¥éª¤çš„å¼€å§‹/ç»“æŸæ—¶é—´
- å­è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯
- é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª
- æ¨é€æˆåŠŸ/å¤±è´¥ç»Ÿè®¡

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
cd logs
dir /O-D  # Windows
# æˆ–ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€

# æœç´¢é”™è¯¯
findstr /i "error" executor_*.log
findstr /i "å¤±è´¥" executor_*.log
```

---

## å¸¸è§é—®é¢˜

### 1. Serveré…±æ¨é€å¤±è´¥

**é—®é¢˜**ï¼šæ—¥å¿—æ˜¾ç¤º"æ¨é€å¤±è´¥"æˆ–"è¿”å›ç é0"

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `config.json` ä¸­çš„SendKeyæ˜¯å¦æ­£ç¡®
2. ç¡®è®¤SendKeyæœªè¿‡æœŸï¼ˆServeré…±å…è´¹ç‰ˆæœ‰æ•ˆæœŸæœ‰é™ï¼‰
3. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. æŸ¥çœ‹Serveré…±å®˜ç½‘æ˜¯å¦æœ‰æ¨é€é™åˆ¶

### 2. ä¿¡å·æ–‡ä»¶ä¸ºç©ºæˆ–ä¸å­˜åœ¨

**é—®é¢˜**ï¼šæ­¥éª¤2ç”Ÿæˆçš„ä¿¡å·æ–‡ä»¶ä¸ºç©º

**å¯èƒ½åŸå› **ï¼š
1. ä»Šæ—¥æ— CCIåº•èƒŒç¦»ä¿¡å·ï¼ˆæ­£å¸¸æƒ…å†µï¼‰
2. CCIæ•°æ®åº“æœªæ›´æ–°æˆ–ä¸ºç©º
3. è‚¡ç¥¨æ± æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯
4. ç½®ä¿¡åº¦é˜ˆå€¼è®¾ç½®è¿‡é«˜

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `../CCI-Divergence/data/cci_signals.db` æ˜¯å¦å­˜åœ¨
2. ç¡®è®¤CCIæ•°æ®åº“åŒ…å«å†å²èƒŒç¦»æ•°æ®
3. é™ä½ `min_confidence` é˜ˆå€¼æµ‹è¯•
4. æ£€æŸ¥è‚¡ç¥¨æ± æ–‡ä»¶è·¯å¾„å’Œæ ¼å¼

### 3. Kçº¿æ•°æ®æ›´æ–°å¤±è´¥

**é—®é¢˜**ï¼šæ­¥éª¤1æ‰§è¡Œå¤±è´¥

**å¯èƒ½åŸå› **ï¼š
1. miniQMTæœªå¯åŠ¨æˆ–è¿æ¥å¤±è´¥
2. ç½‘ç»œé—®é¢˜å¯¼è‡´æ•°æ®ä¸‹è½½å¤±è´¥
3. è„šæœ¬è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤miniQMTå·²å¯åŠ¨å¹¶æ­£å¸¸è¿è¡Œ
2. æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡ `stock_data_manager.py` æµ‹è¯•
3. æ£€æŸ¥ `config.json` ä¸­çš„ `script_path` æ˜¯å¦æ­£ç¡®

### 4. å®šæ—¶ä»»åŠ¡æœªæ‰§è¡Œ

**é—®é¢˜**ï¼šåˆ°äº†16:00ä»»åŠ¡æ²¡æœ‰è‡ªåŠ¨è¿è¡Œ

**è§£å†³æ–¹æ³•**ï¼š
1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº"æ£€æŸ¥ä»»åŠ¡çŠ¶æ€
2. æŸ¥çœ‹ä»»åŠ¡"ä¸Šæ¬¡è¿è¡Œç»“æœ"ï¼ˆ0è¡¨ç¤ºæˆåŠŸï¼‰
3. ç¡®è®¤è®¡ç®—æœºåœ¨16:00æ—¶å¤„äºå¼€æœºçŠ¶æ€
4. æ£€æŸ¥ä»»åŠ¡æ˜¯å¦è¢«ç¦ç”¨
5. æ‰‹åŠ¨è¿è¡Œä»»åŠ¡æµ‹è¯•

### 5. è‚¡ç¥¨åç§°ä¸æ˜¾ç¤º

**é—®é¢˜**ï¼šæ¨é€æ¶ˆæ¯ä¸­åªæœ‰è‚¡ç¥¨ä»£ç ï¼Œæ²¡æœ‰åç§°

**åŸå› **ï¼š`stock_list.txt` æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `../data/stock_list.txt` æ˜¯å¦å­˜åœ¨
2. å¦‚æœä¸éœ€è¦åç§°ï¼Œå¯ä»¥åœ¨é…ç½®ä¸­è®¾ç½® `include_stock_name: false`
3. æ‰‹åŠ¨åˆ›å»ºè‚¡ç¥¨åç§°ç¼“å­˜æ–‡ä»¶ï¼ˆæ ¼å¼ï¼šä»£ç ,åç§°ï¼‰

---

## æ‰‹åŠ¨æµ‹è¯•

### æµ‹è¯•æ¨é€åŠŸèƒ½
```bash
cd daily_executor
python wechat_pusher.py signals/daily_signals.csv
```

### æµ‹è¯•ä¿¡å·ç”Ÿæˆ
```bash
cd daily_executor
python ../CCI-Divergence/scripts/export_cci_signals_for_simulation.py \
    --start-date 2025-11-10 \
    --end-date 2025-11-10 \
    --output signals/test_signals.csv \
    --db-path ../CCI-Divergence/data/cci_signals.db \
    --min-confidence 0.5
```

### æµ‹è¯•å®Œæ•´æµç¨‹
```bash
cd daily_executor
python daily_executor.py
```

---

## é«˜çº§é…ç½®

### è°ƒæ•´æ‰§è¡Œæ—¶é—´

å¦‚æœå‘ç°16:00æ•°æ®è¿˜æœªæ›´æ–°å®Œæˆï¼Œå¯ä»¥è°ƒæ•´ä¸º16:30æˆ–17:00ï¼š

1. åˆ é™¤æ—§ä»»åŠ¡ï¼š`schtasks /Delete /TN "QuantDailyExecutor" /F`
2. ç¼–è¾‘ `setup_task.bat`ï¼Œä¿®æ”¹ `/ST 16:00` ä¸º `/ST 16:30`
3. é‡æ–°è¿è¡Œ `setup_task.bat`

### è‡ªå®šä¹‰è¿‡æ»¤æ¡ä»¶

åœ¨ `daily_executor.py` çš„ `step3_push_to_wechat` æ–¹æ³•ä¸­æ·»åŠ è¿‡æ»¤é€»è¾‘ï¼š

```python
# è¯»å–ä¿¡å·
signals_df = pd.read_csv(signals_file)

# è‡ªå®šä¹‰è¿‡æ»¤ï¼šä¾‹å¦‚åªä¿ç•™ç½®ä¿¡åº¦>0.8çš„ä¿¡å·
signals_df = signals_df[signals_df['confidence'] > 0.8]

# è‡ªå®šä¹‰è¿‡æ»¤ï¼šä¾‹å¦‚æ’é™¤ç‰¹å®šè‚¡ç¥¨
exclude_stocks = ['000001_SZ', '600519_SH']
signals_df = signals_df[~signals_df['stock_code'].isin(exclude_stocks)]

# ä¿å­˜è¿‡æ»¤åçš„ä¿¡å·
signals_df.to_csv(signals_file, index=False)
```

### æ·»åŠ å¤±è´¥é€šçŸ¥

å¦‚æœå¸Œæœ›åœ¨æ‰§è¡Œå¤±è´¥æ—¶ä¹Ÿæ”¶åˆ°æ¨é€é€šçŸ¥ï¼Œå¯ä»¥ä¿®æ”¹ `daily_executor.py`ï¼š

```python
def execute(self):
    try:
        # ... åŸæœ‰ä»£ç  ...
    except Exception as e:
        # å‘é€å¤±è´¥é€šçŸ¥
        self._send_error_notification(str(e))
        raise

def _send_error_notification(self, error_msg: str):
    """å‘é€é”™è¯¯é€šçŸ¥åˆ°Serveré…±"""
    config = self.config['server_sauce']
    for recipient in config['recipients']:
        if not recipient.get('enabled', True):
            continue

        sendkey = recipient['sendkey']
        url = f"https://sctapi.ftqq.com/{sendkey}.send"

        requests.post(url, data={
            'title': 'âŒ è‡ªåŠ¨åŒ–æ¨é€è„šæœ¬æ‰§è¡Œå¤±è´¥',
            'desp': f'é”™è¯¯ä¿¡æ¯ï¼š\n\n```\n{error_msg}\n```'
        })
```

---

## ç»´æŠ¤å»ºè®®

### å®šæœŸæ£€æŸ¥

1. **æ¯å‘¨**ï¼šæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œç¡®è®¤æ‰§è¡Œæ­£å¸¸
2. **æ¯æœˆ**ï¼šæ¸…ç†è¿‡æœŸæ—¥å¿—ï¼ˆè¶…è¿‡30å¤©ï¼‰
3. **æ¯å­£åº¦**ï¼šæ£€æŸ¥Serveré…±SendKeyæ˜¯å¦éœ€è¦ç»­æœŸ

### æ—¥å¿—æ¸…ç†

```bash
# æ‰‹åŠ¨æ¸…ç†30å¤©å‰çš„æ—¥å¿—
forfiles /p "logs" /s /m *.log /d -30 /c "cmd /c del @path"
```

æˆ–æ·»åŠ åˆ° `daily_executor.py` ä¸­è‡ªåŠ¨æ¸…ç†ã€‚

---

## æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š`logs/executor_*.log`
2. æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼š`config.json`
3. æ‰‹åŠ¨æµ‹è¯•å„ä¸ªæ­¥éª¤
4. æŸ¥çœ‹æœ¬æ–‡æ¡£"å¸¸è§é—®é¢˜"ç« èŠ‚

---

## ç‰ˆæœ¬å†å²

- **v1.0.0** (2025-11-10)
  - åˆå§‹ç‰ˆæœ¬
  - æ”¯æŒKçº¿æ•°æ®è‡ªåŠ¨æ›´æ–°
  - æ”¯æŒCCIåº•èƒŒç¦»ä¿¡å·ç”Ÿæˆ
  - æ”¯æŒServeré…±å¤šäººæ¨é€
  - æ”¯æŒWindowså®šæ—¶ä»»åŠ¡

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºå†…éƒ¨ä½¿ç”¨å·¥å…·ï¼Œä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚
